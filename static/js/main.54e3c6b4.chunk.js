(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(t,e,a){},17:function(t,e,a){},19:function(t,e,a){},20:function(t,e,a){},21:function(t,e,a){},22:function(t,e,a){},44:function(t,e,a){},46:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(7),c=a.n(r),i=(a(11),a(3)),s=a(4),l=a(6),u=a(5),m=a(8),h=(a(17),a(1));var d=function(t){var e=t.handleInput,a=t.handleFormSubmit,n=t.imgName;return Object(h.jsxs)("form",{className:"SearchForm",onSubmit:a,children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{value:n,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:e})]})},g=(a(19),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={imgName:""},t.handleInput=function(e){var a=e.currentTarget.value;t.setState({imgName:a})},t.handleFormSubmit=function(e){e.preventDefault(),""!==t.state.imgName.trim()?(t.props.onSubmit(t.state.imgName),t.setState({imgName:""})):m.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e.")},t}return Object(s.a)(a,[{key:"render",value:function(){return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsx)(d,{handleFormSubmit:this.handleFormSubmit,handleInput:this.handleInput,imgName:this.state.imgName})})}}]),a}(n.Component)),p=a(9);a(20);var b=function(t){var e=t.id,a=t.alt,n=t.webformatURL,o=t.largeImageURL,r=t.onClick,c={id:e,alt:a,largeImageURL:o};return Object(h.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return r(c)},children:Object(h.jsx)("img",{src:n,alt:a,"data-imglarge":o,className:"ImageGalleryItem-image"})},e)};a(21);window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});var j=function(t){var e=t.handleLoadMoreButton;return Object(h.jsx)("button",{type:"button",className:"Button",onClick:function(){return e()},children:"Load more"})},f=(a(22),a(12)),v=a.n(f),O=(a(43),"idle"),y="pending",S="resolved",x="rejected",N=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={imgCards:[],error:null,status:O,page:1},t.handleLoadMoreButton=function(){t.setState((function(t){return{page:t.page+1}})),setTimeout((function(){fetch("https://pixabay.com/api/?q=".concat(t.props.imgName,"&page=").concat(t.state.page,"&key=22260377-843feab13a68cee38d30608c2&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.json()})).then((function(e){var a=e.hits;t.setState({imgCards:[].concat(Object(p.a)(t.state.imgCards),Object(p.a)(a)),status:S})})).catch((function(e){return t.setState({error:e,status:x})}))}),0)},t}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this;t.imgName!==this.props.imgName&&(this.setState({status:y}),fetch("https://pixabay.com/api/?q=".concat(this.props.imgName,"&page=").concat(this.state.page,"&key=22260377-843feab13a68cee38d30608c2&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.json()})).then((function(t){var e=t.hits;if(0===e.length)return a.setState({status:O}),m.b.error("\u041d\u0435 \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a !!!");a.setState({imgCards:Object(p.a)(e),status:S})})).catch((function(t){return a.setState({error:t,status:x})})))}},{key:"render",value:function(){var t=this,e=this.state,a=e.status,n=e.imgCards,o=e.error;return"idle"===a?null:"pending"===a?Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)(v.a,{type:"Bars",color:"#00BFFF",height:80,width:80,timeout:3e3})}):"resolved"===a?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("ul",{className:"ImageGallery",children:n.map((function(e){var a=e.id,n=e.webformatURL,o=e.largeImageURL,r=e.tags;return Object(h.jsx)(b,{id:a,alt:r,webformatURL:n,largeImageURL:o,onClick:t.props.onCLickImg},a)}))}),Object(h.jsx)(j,{handleLoadMoreButton:this.handleLoadMoreButton})]}):"rejected"===a?Object(h.jsx)("h2",{children:o.message}):void 0}}]),a}(n.Component),C=(a(44),document.querySelector("#modal-root")),w=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&(console.log("\u041d\u0430\u0436\u0430\u043b\u0438 ESC, \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u043c\u043e\u0434\u0430\u043b\u043a\u0443"),t.props.onClose())},t.handleBackdropClick=function(e){e.currentTarget===e.target&&t.props.onClose()},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t=this.props.imgInfo;return Object(r.createPortal)(Object(h.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(h.jsx)("div",{className:"Modal",children:Object(h.jsx)("img",{src:t.largeImageURL,alt:t.alt})})}),C)}}]),a}(n.Component),k=(a(45),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={imgName:null,showModal:!1,src:null},t.onSubmit=function(e){t.setState({imgName:e})},t.toggleModal=function(e){t.setState((function(t){return{showModal:!t.showModal,src:e}}))},t}return Object(s.a)(a,[{key:"render",value:function(){var t=this.state,e=t.showModal,a=t.src;return Object(h.jsxs)("div",{className:"App",children:[e&&Object(h.jsx)(w,{onClose:this.toggleModal,imgInfo:a}),Object(h.jsx)(m.a,{autoClose:3e3}),Object(h.jsx)(g,{onSubmit:this.onSubmit}),Object(h.jsx)(N,{imgName:this.state.imgName,onCLickImg:this.toggleModal})]})}}]),a}(n.Component)),I=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,47)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,c=e.getTTFB;a(t),n(t),o(t),r(t),c(t)}))};c.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root")),I()}},[[46,1,2]]]);
//# sourceMappingURL=main.54e3c6b4.chunk.js.map